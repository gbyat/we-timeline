!function(){function e(e,t){if("items"===t)return e.map(e=>({label:e.title,value:e.id,type:"item"}));const n={};return e.forEach(e=>{const a=new Date(e.date);let i;if("decades"===t){const e=a.getFullYear();i=10*Math.floor(e/10)}else"years"===t?i=a.getFullYear():"months"===t&&(i=`${a.getFullYear()}-${String(a.getMonth()+1).padStart(2,"0")}`);n[i]||(n[i]=[]),n[i].push(e)}),Object.keys(n).sort().map(e=>{const a=new Date(n[e][0].date);let i;return"decades"===t?i=`${parseInt(e)}s`:"years"===t?i=e:"months"===t&&(i=a.toLocaleDateString("en-US",{month:"long",year:"numeric"})),{label:i,value:e,type:t.slice(0,-1),items:n[e]}})}function t(e){const t=document.querySelector(`.we-timeline__item[data-id="${e}"]`);t&&t.scrollIntoView({behavior:"smooth",block:"center"})}document.querySelectorAll(".wp-block-we-timeline-timeline .we-timeline-menu:not(.processed)").forEach(n=>{n.classList.add("processed");const a=n.dataset.granularity||"auto",i=n.closest(".wp-block-we-timeline-timeline");if(!i)return;const o=i.querySelectorAll(".we-timeline__item");if(0===o.length)return;const r=n.querySelector(".we-timeline-menu__items");if(!r)return;const s=function(t,n){const a=(n||"auto").toLowerCase().trim(),i=Array.from(t).map(e=>{const t=e.dataset.date;return{id:e.dataset.id,date:t,title:e.querySelector(".we-timeline__item-title")?.textContent||"",timestamp:new Date(t).getTime()}});return"auto"===a?function(t){if(0===t.length)return[];const n=t.map(e=>e.timestamp),a=Math.min(...n),i=(Math.max(...n)-a)/31536e6;return i<1?t.map(e=>({label:e.title,value:e.id,type:"item"})):e(t,i<=5?"months":"years")}(i):e(i,a)}(o,a);!function(e,n){e&&(e.innerHTML="",n.forEach(n=>{const a=document.createElement("button");a.className="we-timeline-menu__item",a.textContent=n.label,a.dataset.value=n.value,a.dataset.type=n.type,n.items?a.addEventListener("click",()=>{var e;0!==(e=n.items).length&&t(e[0].id)}):a.addEventListener("click",()=>{t(n.value)}),e.appendChild(a)}))}(r,s),function(e,t){const n=e.querySelector(".we-timeline-menu__items");if(!n)return;const a=Array.from(n.querySelectorAll(".we-timeline-menu__item"));function i(){const e=function(){const e=window.innerHeight,n=e/3;let a=null,i=1/0;return t.forEach(t=>{const o=t.getBoundingClientRect(),r=o.top+o.height/2,s=Math.abs(r-n);o.bottom>0&&o.top<e&&s<i&&(i=s,a=t)}),a}();if(!e)return;const i=e.dataset.id,o=e.dataset.date;t.forEach(e=>{e.classList.remove("is-active")}),e.classList.add("is-active");let r=null;if(r=n.querySelector(`[data-value="${i}"]`),!r&&o){const e=new Date(o),t=e.getFullYear(),n=e.getMonth()+1,s=10*Math.floor(t/10);a.forEach(e=>{const a=e.dataset.type,o=e.dataset.value;("item"===a&&o===i||"year"===a&&parseInt(o)===t||"month"===a&&o===`${t}-${String(n).padStart(2,"0")}`||"decade"===a&&parseInt(o)===s)&&(r=e)})}a.forEach(e=>{e.classList.remove("is-active")}),r&&r.classList.add("is-active")}let o=!1;function r(){o||(window.requestAnimationFrame(()=>{i(),o=!1}),o=!0)}window.addEventListener("scroll",r,{passive:!0}),window.addEventListener("resize",r,{passive:!0}),i()}(n,o)})}();